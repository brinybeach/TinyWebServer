# README #

The TinyWebServer project was written for part A of the Adobe
Web Tech test. It includes static and dynamic Web content to
demonstrate serving pages and a simple REST service.

# Architecture #

The TinyWebServer starts a single HttpServerRunner that listens for incoming connections on a specified
port. When a client connection is recieved a new HttpConnectionRunner is created to handle the connection.

The HttpConnectionRunner is wrapped in a thread and added to a pool of threads. The HttpConnectionRunner opens
an InputStream and OutputStream to the Web client and reads the data arriving from the InputStream and
calls the HttpRequestParser to parse it into a HttpRequest object a character at a time as the data is
read from the client connection.

The HttpRequest object wraps the parts of the HTTP RFC such as the request
METHOD, URI, VERSION, and HEADERS, as specified in the HTTP RFC.

An new appropriate HttpResponse object is created from the HttpRequest. The HttpResponse object
wraps the parts of the HTTP RFC such as the VERSION, STATUS CODE, REASON PHRASE, HEADERS, and BODY content.
The HttpFileManager is used when building the HttpResponse to get file attributes such as length, mime-type,
and a hash used for the Etag: header.

The HttpResponseRules object is used to modify the HttpResponse object based on the rules from the HTTP RFC.

The HttpConnectionRunner then asks the HttpResponse object to write itself to the connected Web client
over the OutputStream. The HttpConnectionRunner will then continue to wait for requests or close the
OutputStream as per HTTP/1.1 specs based on the presence of the computed "Connection: close" header in the
HttpResponse object.

Dynamic content is generated by Java methods annotated with the @HttpRequestHandler in classes annotated
with @HttpController. The method annotated by the @HttpRequestHandler has an "uri" and "method" attribute
and is invoked if there is a match to message line in the HttpRequest object. The HttpRequestHandlerFactory is a
singleton object that scans the classes in the package for HttpRequestHandler methods and stores them in a
Map. The HttpConnectionRunner asks the HttpRequestHandlerFactory for a handler matching the HttpRequest and
then invokes the handler on the HttpRequest which returns a HttpResponse object to which rules are applied
before it is written to the OutputStream.

There are several settings that can be modified such as the thread pool size, the listening socket port and 
timeout, and the root directory. The settings are stored in a file named server.properties and loaded using 
the HttpServerConfig class.

The JavaDoc for the TinyWebServer can be found at &lt;project dir&gt;/docs/index.html.

### How do I get set up? ###

* Clone this repo
* cd &lt;project dir&gt;
* mvn clean
* mvn compile
* mvn test (optional)
* mvn exec:java
* Browse to http://localhost:8080/

### Thanks ###

Thanks to the Bootstrap team for the Jumbotron
example Web page used for the demonstration
content! (http://getbootstrap.com/)

### Who do I talk to? ###

* Bryant Bunderson <bryant.bunderson@gmail.com>
